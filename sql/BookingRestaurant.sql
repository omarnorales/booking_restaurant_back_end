
-- -----------------------------------------------------
-- Schema BOOKING_RESTAURANT
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema BOOKING_RESTAURANT
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `BOOKING_RESTAURANT` DEFAULT CHARACTER SET utf8 ;
USE `BOOKING_RESTAURANT` ;

-- -----------------------------------------------------
-- Table `BOOKING_RESTAURANT`.`RESTAURANT`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BOOKING_RESTAURANT`.`RESTAURANT` (
  `ID` INT(19) NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(45) NULL,
  `DESCRIPTION` VARCHAR(100) NULL,
  `ADDRESS` VARCHAR(100) NULL,
  `IMAGE` VARCHAR(500) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `BOOKING_RESTAURANT`.`RESERVATION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BOOKING_RESTAURANT`.`RESERVATION` (
  `ID` INT(19) NOT NULL  AUTO_INCREMENT,
  `LOCATOR` VARCHAR(45) NULL,
  `PERSON` INT(19) NULL,
  `DATE` DATE NULL,
  `TURN` VARCHAR(45) NULL,
  `RESTAURANT_ID` INT(19) NOT NULL,
  PRIMARY KEY (`ID`),
  INDEX `fk_RESERVATION_RESTAURANT_idx` (`RESTAURANT_ID` ASC),
  CONSTRAINT `fk_RESERVATION_RESTAURANT`
    FOREIGN KEY (`RESTAURANT_ID`)
    REFERENCES `BOOKING_RESTAURANT`.`RESTAURANT` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `BOOKING_RESTAURANT`.`TURN`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BOOKING_RESTAURANT`.`TURN` (
  `ID` INT(19) NOT NULL  AUTO_INCREMENT,
  `NAME` VARCHAR(45) NULL,
  `RESTAURANT_ID` INT(19) NOT NULL,
  PRIMARY KEY (`ID`),
  INDEX `fk_TURN_RESTAURANT1_idx` (`RESTAURANT_ID` ASC),
  CONSTRAINT `fk_TURN_RESTAURANT1`
    FOREIGN KEY (`RESTAURANT_ID`)
    REFERENCES `BOOKING_RESTAURANT`.`RESTAURANT` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `BOOKING_RESTAURANT`.`BOARD`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `BOOKING_RESTAURANT`.`BOARD` (
  `ID` INT(19) NOT NULL AUTO_INCREMENT,
  `CAPACITY` INT(19) NULL,
  `NUMBER` INT(19) NULL,
  `RESTAURANT_ID` INT(19) NOT NULL,
  PRIMARY KEY (`ID`),
  INDEX `fk_BOARD_RESTAURANT1_idx` (`RESTAURANT_ID` ASC),
  CONSTRAINT `fk_BOARD_RESTAURANT1`
    FOREIGN KEY (`RESTAURANT_ID`)
    REFERENCES `BOOKING_RESTAURANT`.`RESTAURANT` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

INSERT INTO `BOOKING_RESTAURANT`.`RESTAURANT` (`ID`,`NAME`,`DESCRIPTION`,`ADDRESS`,`IMAGE`) VALUES (1,'Burger Hulk','odo tipo de Amburguesa','Boston rd','https://cdn.pixabay.com/photo/2019/07/29/05/52/burger-4369973_1280.jpg');
INSERT INTO `BOOKING_RESTAURANT`.`RESTAURANT` (`ID`,`NAME`,`DESCRIPTION`,`ADDRESS`,`IMAGE`) VALUES (2,'KFC','Venta de Pollos','375 East 149th Street','https://marvel-b1-cdn.bc0a.com/f00000000067087/www.bdcnetwork.com/sites/bdc/files/styles/content_display_image/public/2023_001.jpg');
INSERT INTO `BOOKING_RESTAURANT`.`RESTAURANT` (`ID`,`NAME`,`DESCRIPTION`,`ADDRESS`,`IMAGE`) VALUES (3,'Kennedy Fried Chicken','Pollo Frito','3042 Third Ave','https://c8.alamy.com/comp/2CB4CKY/kennedys-fried-chicken-pizza-3042-third-ave-bronx-ny-exterior-storefront-of-a-fried-chicken-chain-restaurant-in-the-melrose-neighborhood-2CB4CKY.jpg');

INSERT INTO `BOOKING_RESTAURANT`.`TURN` (`ID`, `NAME`, `RESTAURANT_ID`) VALUES ('1', 'TURNO_10_00', '1');
INSERT INTO `BOOKING_RESTAURANT`.`TURN` (`ID`, `NAME`, `RESTAURANT_ID`) VALUES ('2', 'TURNO_11_00', '1');
INSERT INTO `BOOKING_RESTAURANT`.`TURN` (`ID`, `NAME`, `RESTAURANT_ID`) VALUES ('3', 'TURNO_12_00', '1');
INSERT INTO `BOOKING_RESTAURANT`.`TURN` (`ID`, `NAME`, `RESTAURANT_ID`) VALUES ('4', 'TURNO_13_00', '1');

INSERT INTO `BOOKING_RESTAURANT`.`TURN` (`ID`, `NAME`, `RESTAURANT_ID`) VALUES ('5', 'TURNO_10_00', '2');
INSERT INTO `BOOKING_RESTAURANT`.`TURN` (`ID`, `NAME`, `RESTAURANT_ID`) VALUES ('6', 'TURNO_11_00', '2');
INSERT INTO `BOOKING_RESTAURANT`.`TURN` (`ID`, `NAME`, `RESTAURANT_ID`) VALUES ('7', 'TURNO_12_00', '2');
INSERT INTO `BOOKING_RESTAURANT`.`TURN` (`ID`, `NAME`, `RESTAURANT_ID`) VALUES ('8', 'TURNO_13_00', '2');

INSERT INTO `BOOKING_RESTAURANT`.`BOARD` (`ID`, `CAPACITY`, `NUMBER`, `RESTAURANT_ID`) VALUES ('1', '3', '1', '1');
INSERT INTO `BOOKING_RESTAURANT`.`BOARD` (`ID`, `CAPACITY`, `NUMBER`, `RESTAURANT_ID`) VALUES ('2', '6', '2', '1');
INSERT INTO `BOOKING_RESTAURANT`.`BOARD` (`ID`, `CAPACITY`, `NUMBER`, `RESTAURANT_ID`) VALUES ('3', '2', '3', '1');
INSERT INTO `BOOKING_RESTAURANT`.`BOARD` (`ID`, `CAPACITY`, `NUMBER`, `RESTAURANT_ID`) VALUES ('4', '5', '4', '1');

INSERT INTO `BOOKING_RESTAURANT`.`BOARD` (`ID`, `CAPACITY`, `NUMBER`, `RESTAURANT_ID`) VALUES ('5', '4', '1', '2');
INSERT INTO `BOOKING_RESTAURANT`.`BOARD` (`ID`, `CAPACITY`, `NUMBER`, `RESTAURANT_ID`) VALUES ('6', '6', '2', '2');
INSERT INTO `BOOKING_RESTAURANT`.`BOARD` (`ID`, `CAPACITY`, `NUMBER`, `RESTAURANT_ID`) VALUES ('7', '4', '3', '2');
INSERT INTO `BOOKING_RESTAURANT`.`BOARD` (`ID`, `CAPACITY`, `NUMBER`, `RESTAURANT_ID`) VALUES ('8', '8', '4', '2');

INSERT INTO `BOOKING_RESTAURANT`.`RESERVATION` (`ID`, `LOCATOR`, `PERSON`, `DATE`, `TURN`, `RESTAURANT_ID`) VALUES ('1', 'Burger Hulk 6', '6', '2021-12-31', 'TURNO_10_00', '1');
INSERT INTO `BOOKING_RESTAURANT`.`RESERVATION` (`ID`, `LOCATOR`, `PERSON`, `DATE`, `TURN`, `RESTAURANT_ID`) VALUES ('2', 'Burger Hulk 6', '6', '2021-12-31', 'TURNO_10_00', '1');


-- 2021-JAN 21 NEW CLIENT REQUEST
-- FOR SPRING METOD IMPORTANT TO TAKE THE UPDATE INSTEAD OF WHOLE CREATE SCRIPT
ALTER TABLE `BOOKING_RESTAURANT`.`RESTAURANT` 
ADD COLUMN `PRICE` INT NULL AFTER `IMAGE`;

ALTER TABLE `BOOKING_RESTAURANT`.`RESERVATION` 
ADD COLUMN `NAME` VARCHAR(45) NULL AFTER `RESTAURANT_ID`,
ADD COLUMN `EMAIL` VARCHAR(45) NULL AFTER `NAME`;

ALTER TABLE `BOOKING_RESTAURANT`.`RESERVATION` 
ADD COLUMN `PAYMENT` BLOB NULL AFTER `EMAIL`;



CREATE TABLE IF NOT EXISTS `BOOKING_RESTAURANT`.`NOTIFICATION` (
  `ID` INT(19) NOT NULL AUTO_INCREMENT,
  `TEMPLATE` VARCHAR(8000) NULL,
  `TEMPLATE_CODE` VARCHAR(45) NULL,
  PRIMARY KEY (`ID`))
ENGINE = InnoDB;
